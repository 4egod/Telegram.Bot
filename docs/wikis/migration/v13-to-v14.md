# Migrate from v13 to v14

## Date and Time

All `DateTime` values are now in UTC format. Here are some examples of usage:

```c#
await BotClient.KickChatMemberAsync(
  chatId: -9876,
  userId: 1234,
  untilDate: DateTime.UtcNow.AddDays(2)
);
```

```c#
DateTime localTime = update.Message.Date.ToLocalTime();
```

## Keyboard Buttons

Many keyboard button types are removed from project. It is more convenient to use factory methods on `KeyboardButton` and `InlineKeyboardButton` types. Here are some examples:

```c#
await BotClient.SendTextMessageAsync(
  chatId: -9876,
  text: "Check out the code",
  replyMarkup: new InlineKeyboardMarkup(
    InlineKeyboardButton.WithUrl("Repository on GitHub", "https://github.com/TelegramBots/Telegram.Bot")
  )
);
```

```c#
// 2 row reply keyboard in a private chat:
await BotClient.SendTextMessageAsync(
  chatId: 1234,
  text: "Share your contact info using the keyboard reply markup provided.",
  replyMarkup: new ReplyKeyboardMarkup(
    new [] { KeyboardButton.WithRequestContact("Share Contact") },
    new [] { KeyboardButton.WithRequestLocation("Share Location") },
  )
);
```

## `GetUpdatesAsync()`, `SetWebhookAsync()`

Value `All` is removed from enum `Telegram.Bot.Types.Enums.UpdateType`. In order to get all kind of updates, pass an empty list such as `new UpdateType[0]` for `allowedUpdates` argument.

## `SetWebhookAsync()`

Parameter `url` is required. If you intend to remove the webhook, it is recommended to use `DeleteWebhookAsync()` instead. However, you could achieve the same result by passing `string.Empty` value to `url` argument.

## `SendMediaGroupAsync()`

`InputMediaType` is renamed to `InputMedia`.

> *ToDo*

## Inline Message Overloads

Many inline message methods have been replaced with their overloads.

- `EditInlineMessageTextAsync`--> `EditMessageTextAsync`

> *ToDo*

## `FileToSend`

New classes have replaced `FileToSend` struct.

- `InputFileStream`:
- `InputTelegramFile`:
- `InputOnlineFile`:

In many cases, you can use implicit casting to pass parameters.

```c#
Stream stream = System.IO.File.OpenRead("photo.png");
message = await BotClient.SendPhotoAsync("chat id", stream);

string fileId = "file_id on Telegram servers";
message = await BotClient.SendPhotoAsync("chat id", fileId);
```

> *ToDo*

## `VideoNote`

Properties `Width` and `Height` are removed. Vide notes are squared and `Length` property represents both width and height.

## Constructor Parameters Instead of Public Setters

Public setters for many properties is removed and you should use that type's constructor to pass values. For example:

```c#
InlineKeyboardMarkup markup;

/* Invalid:
 * markup = new InlineKeyboardMarkup();
 * markup.InlineKeyboard = buttonArrays;
 */

// Valid:
markup = new InlineKeyboardMarkup(buttonArrays);
```

## `InlineQueryResult`

`InlineQueryResultNew` and `InlineQueryResultCache` types were removed. `InlineQueryResult` has become the only shared base type for all derived classes.

Many shared properties were placed in separate interfaces which are implemented only by those types that have respective properties. E.g.:

- `InlineQueryResultCache.Caption` has been moved to `ICaptionInlineQueryResult`
- `InlineQueryResultNew.ThumbUrl`, `InlineQueryResultNew.ThumbHeight` and `InlineQueryResultNew.ThumbWidth` have been moved to `IThumbnailUrlInlineQueryResult` and `IThumbnailInlineQueryResult`
- `InlineQueryResult.Title` has been moved to `ITitleInlineQueryResult`
- `InlineQueryResult.InputMessageContent` has been moved to `IInputMessageContentResult`

Therefore some inline query results now have less properties because they were not a part of these types according to Telegram Bot API.

All input query results now have constructors with all the required properties as their parameters. This is the preferred way to instantiate input query result instances. E.g.:

Instead of:

```c#
var documentResult = new InlineQueryResultDocument
{
  Id = "some-id",
  Url = "https://example.com/document.pdf",
  Title = "Some title",
  MimeType = "application/pdf"
};
```

you should use:

```c#
var documentResult = new InlineQueryResultDocument(
  id: "some-id",
  documentUrl: "https://example.com/document.pdf",
  title: "Some title",
  mimeType: "application/pdf"
);
```